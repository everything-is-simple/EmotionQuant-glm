# EmotionQuant Task→Step 工作流（Spiral Lite 默认）

**版本**: v5.0.0  
**最后更新**: 2026-02-07  
**用途**: 指导单个 Task 如何落地为可闭环结果

---

## 1. 默认四步（必走）

1. Scope
2. Build
3. Verify
4. Sync

---

## 2. 每步检查项

### 2.1 Scope

- 用 `TASK-TEMPLATE.md` 写清目标、范围、输入输出契约。
- 确认 `run/test/artifact` 三项闭环证据。

### 2.2 Build

- 实现最小功能。
- 同步补齐至少 1 条自动化测试。

### 2.3 Verify

- `run` 命令成功。
- `test` 命令成功。
- 产物可检查。
- 在 `review.md` 记录偏差与风险。

### 2.4 Sync

- 更新 `final.md`。
- 更新 `development-status.md`。
- 更新 `debts.md`（如有）。
- 更新 `reusable-assets.md`（如有）。
- 仅在契约变化时更新 CP 文档。

---

## 3. 闭环门禁（Task 级）

- [ ] 可运行命令
- [ ] 自动化测试
- [ ] 可检查产物
- [ ] review 复盘
- [ ] 同步完成

---

## 4. 升级到 Strict 6A 的条件

满足任一条件，升级为完整 6A：

1. 交易执行路径重大改动
2. 风控规则重大改动
3. 数据契约破坏性变更
4. 新外部依赖影响主流程

---

## 5. 保留质量规则

1. 禁止硬编码路径/密钥
2. 主流程本地数据优先
3. A 股规则合规
4. 单指标不得独立触发交易

---

## 6. 分支与合并

- 开发分支：`feature/spiral-s{N}-*`
- 收口后执行测试，再合并 `develop`

---

## 变更记录

| 版本 | 日期 | 变更内容 |
|---|---|---|
| v5.0.0 | 2026-02-07 | 重写为 Spiral Lite 默认执行卡；Sync 改为最小必要同步 |
| v4.0.0 | 2026-02-07 | Spiral 四步初版 |
